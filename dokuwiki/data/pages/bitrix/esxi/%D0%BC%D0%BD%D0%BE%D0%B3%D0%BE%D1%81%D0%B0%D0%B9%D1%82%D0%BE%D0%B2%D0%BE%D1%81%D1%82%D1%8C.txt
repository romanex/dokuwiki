======Настройка многосайтовости======


===Настройка многосайтовости link===
1. Добавить ДНС запись\\
2. На вэб прокси создать конфиг для сайта, перезагрузить вэб сервер\\
3. На виртуальном сервере через меню битрикса создать еще один сайт типа link\\
4. Проверить, создались ли симлинки на каталоги bitrix, upload , local (https:%%//%%dev.1c-bitrix.ru/learning/course/?COURSE_ID=103&LESSON_ID=287)\\
5. Скорировать все недоствющие файлы из основного каталога.\\
6. На микротике прописать статические днс записи

===Настройка многосайтовости kernel===

1. Добавить ДНС запись\\
2. На вэб прокси создать конфиг для сайта, перезагрузить вэб сервер\\
3. На виртуальном сервере через меню битрикса создать еще один сайт типа kernel\\
4. Выбрать кодировку \\
5. Ввести логины пароль mysql\\
6. На микротике прописать статические днс записи

Если при попытке создать доп. сайт menu.sh показывает «Found MySQL service with empty root password», но пароль задан. Смена пароля через menu.sh не помогла.

Обход с помощью подмены закешированного результата проверки:\\
1. Запускаем menu.sh.\\
2. Доходим до момента, когда появляется сообщение «Found MySQL service with empty root password».\\
3. Жмем Ctrl+Z, menu.sh уходит в бекграунд.\\
4. Открываем файл /opt/webdir/tmp/mysql_servers_status.cache — в нем должен быть список значений, разделенных «:». На 3-м и 2-м месте с конца находятся параметры, отвечающие за сообщения «Found MySQL service with empty root password» и «Not found MySQL client config». (В моем случае было «N:N»).\\
5. Заменяем эти параметры на «Y:Y».\\
6. Сохраняем, выходим из редактора обратно в консоль.\\
7. Возвращаем menu.sh из бекграунда командой fg.\\
8. Пытаемся добавить сайт еще раз.\\
9. PROFIT.

memcached!!!